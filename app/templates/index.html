<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>Dawid Trojanowski - Kontakt</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body { font-family: system-ui, sans-serif; background: radial-gradient(circle at 10% 20%, #1e293b, #0f172a); color:#e6eef8; padding:24px; }
      .card { background: rgba(255,255,255,0.03); padding:20px; border-radius:12px; max-width:700px; margin:auto; }
      input, textarea { width:100%; padding:10px; margin-bottom:8px; border-radius:6px; border:1px solid rgba(255,255,255,0.08); background:rgba(255,255,255,0.02); color:white; }
      button { background:#7c3aed; color:white; padding:10px 14px; border-radius:8px; border:none; cursor:pointer; }
    </style>
  </head>
  <body>
    <div class="card">
      <h1>Dawid Trojanowski — Kontakt</h1>
      <p>Wypełnij formularz, wiadomość trafi do kolejki Redis, worker zapisze do bazy i wyśle do Kafki.</p>
      <form id="contact-form">
        <input name="email" type="email" placeholder="Twój email" required/>
        <textarea name="message" rows="6" placeholder="Twoja wiadomość" required></textarea>
        <input name="id" placeholder="opcjonalne id"/>
        <button type="submit">Wyślij</button>
      </form>
      <div id="result" style="margin-top:12px;color:#c7f9cc"></div>
    </div>
    <script>
      const form = document.getElementById('contact-form');
      const result = document.getElementById('result');
      form.addEventListener('submit', async e => {
        e.preventDefault();
        const fd = new FormData(form);
        const r = await fetch('/api/contact', { method: 'POST', body: fd });
        const j = await r.json().catch(()=>({}));
        result.textContent = j.message || j.status || JSON.stringify(j);
        setTimeout(()=> result.textContent = '', 5000);
        form.reset();
      });
    </script>
  </body>
</html>
