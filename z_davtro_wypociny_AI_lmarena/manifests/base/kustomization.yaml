apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: davtrowebdbvault

resources:
  # 1. Core databases and storage
  - postgres-db.yaml
  - redis.yaml
  - vault.yaml

  # 2. Message queue and streaming
  - kafka-config.yaml
  - kafka-kraft.yaml
  - kafka-topic-job.yaml

  # 3. Application components
  - fastapi-config.yaml
  - app-deployment.yaml
  - message-processor.yaml

  # 4. Monitoring and observability
  - prometheus-config.yaml
  - postgres-exporter.yaml
  - kafka-exporter.yaml
  - node-exporter.yaml
  - service-monitors.yaml
  - prometheus.yaml
  - grafana-datasource.yaml
  - grafana-dashboards.yaml
  - grafana.yaml
  - loki-config.yaml
  - loki.yaml
  - promtail-config.yaml
  - promtail.yaml
  - tempo-config.yaml
  - tempo.yaml

  # 5. Management UI and tools
  - pgadmin.yaml
  - kafka-ui.yaml

  # 6. Security and networking
  - vault-secrets.yaml
  - vault-job.yaml
  - network-policies.yaml
  - ingress.yaml
  - kyverno-policy.yaml

labels:
  - pairs:
      app: website-db-vault-kaf-redis-arg-kust-kyv-gra-loki-temp-pgui
      app.kubernetes.io/name: website-db-vault-kaf-redis-arg-kust-kyv-gra-loki-temp-pgui
      app.kubernetes.io/instance: website-db-vault-kaf-redis-arg-kust-kyv-gra-loki-temp-pgui
      app.kubernetes.io/managed-by: kustomize
